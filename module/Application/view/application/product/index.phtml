<h1><?= $this->escapeHtml($this->pageTitle ?? 'Fallback') ?></h1>

<?php if (empty($this->products)): ?>
    <p>Aucun produit disponible pour le moment.</p>
<?php else: ?>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Prix</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($this->products as $product): ?>
                <tr>
                    <td><?= $this->escapeHtml($product->getId()) ?></td>
                    <td><?= $this->escapeHtml($product->getName()) ?></td>
                    <td><?= number_format($product->getPrice(), 2, ',', ' ') ?> €</td>
                    <td><?= $this->escapeHtml($product->getDescription() ?? '') ?></td>
                    <td>
                        <!-- Laminas Feature: Génération d'URL via le routeur -->
                        <a href="<?= $this->url('product', ['action' => 'view', 'id' => $product->getId()]) ?>" 
                           class="btn btn-primary btn-sm">
                            Voir
                        </a>
                    </td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
<?php endif; ?>